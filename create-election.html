<!DOCTYPE html>
<html class="light" lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Create Election - VoteSecure</title>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com" rel="preconnect"/>
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
    <link href="https://fonts.googleapis.com/css2?family=Spline+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <!-- Tailwind Config -->
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#ea2a33",
                        "background-light": "#fcf8f8",
                        "background-dark": "#211111",
                        "navy-deep": "#0A1F44",
                        "democracy-blue": "#1E3A8A",
                    },
                    fontFamily: {
                        "display": ["Spline Sans", "sans-serif"],
                        "mono": ["ui-monospace", "SFMono-Regular", "Menlo", "Monaco", "Consolas", "monospace"],
                    },
                    borderRadius: {"DEFAULT": "0.25rem", "md": "0.375rem", "lg": "0.5rem", "xl": "0.75rem", "2xl": "1rem", "full": "9999px"},
                },
            },
        }
    </script>
    <style>
        body { font-family: 'Spline Sans', sans-serif; }
        .material-symbols-outlined { font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24; }
        
        /* Smooth transitions */
        .fade-enter { opacity: 0; }
        .fade-enter-active { opacity: 1; transition: opacity 0.3s ease-in; }
        .fade-exit-active { opacity: 0; transition: opacity 0.3s ease-out; }
        
        /* Step indicator animation */
        .step-indicator { position: relative; }
        .step-indicator.active::after { background-color: #ea2a33; }
        .step-indicator.completed::after { background-color: #10b981; }
        
        /* Form validation styles */
        .form-input:invalid:not(:placeholder-shown) { border-color: #ef4444; }
        .form-input:valid:not(:placeholder-shown) { border-color: #10b981; }
        
        /* Loading spinner */
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .spinner { animation: spin 1s linear infinite; }
        
        /* Draft autosave indicator */
        .draft-indicator { 
            position: fixed;
            bottom : 20px;
            right: 20px;
            background: rgba(16, 185, 129, 0.9);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            display: none;
            z-index: 40;
        }
        .draft-indicator.show { display: block; }
        
        /* CSV upload area */
        .csv-upload-zone {
            border: 2px dashed #d1d5db;
            border-radius: 8px;
            padding: 24px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .csv-upload-zone:hover,
        .csv-upload-zone.dragover { 
            border-color: #ea2a33;
            background-color: rgba(234, 42, 51, 0.05);
        }
        
        /* Multi-select styling */
        .checkbox-group label {
            display: flex;
            align-items: center;
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.2s;
            border: 1px solid transparent;
        }
        .checkbox-group label:hover {
            background-color: #f3f4f6;
        }
        .checkbox-group label input:checked + span {
            color: #ea2a33;
            font-weight: 600;
        }
        
        /* Timeline styles */
        .timeline-step {
            display: flex;
            gap: 16px;
            margin-bottom: 24px;
            position: relative;
        }
        .timeline-marker {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }
        .timeline-marker.active {
            background: #ea2a33;
            color: white;
        }
        .timeline-marker.completed {
            background: #10b981;
            color: white;
        }
        
        /* Candidate card styles */
        .candidate-card {
            padding: 16px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            display: flex;
            gap: 12px;
            align-items: center;
            justify-content: space-between;
            transition: all 0.2s;
        }
        .candidate-card:hover {
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .candidate-card.dark {
            border-color: #444;
            background: #252525;
        }
        
        /* Toggle switch */
        .toggle-switch {
            position: relative;
            width: 50px;
            height: 28px;
        }
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #d1d5db;
            transition: 0.3s;
            border-radius: 28px;
        }
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: 0.3s;
            border-radius: 50%;
        }
        input:checked + .toggle-slider {
            background-color: #ea2a33;
        }
        input:checked + .toggle-slider:before {
            transform: translateX(22px);
        }
        
        /* Success icon animation */
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        .success-icon { animation: bounce 0.6s ease-in-out; }
    </style>
</head>
<body class="bg-background-light dark:bg-background-dark text-[#1b0e0e] dark:text-[#fcf8f8] overflow-x-hidden">

<!-- Top Navigation -->
<header class="sticky top-0 z-50 w-full bg-background-light/95 dark:bg-background-dark/95 backdrop-blur-sm border-b border-[#f3e7e8] dark:border-[#333]">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-16">
            <!-- Logo -->
            <a href="index.html" class="flex items-center gap-2 hover:opacity-80 transition-opacity">
                <span class="material-symbols-outlined text-primary text-3xl">how_to_vote</span>
                <h2 class="text-xl font-bold tracking-tight">VoteSecure</h2>
            </a>
            <!-- Right Actions -->
            <div class="flex gap-3">
                <button id="saveDraftBtn" class="hidden sm:flex items-center justify-center px-4 h-9 rounded-lg border border-[#e5e7eb] dark:border-[#444] text-sm font-bold hover:bg-gray-50 dark:hover:bg-[#333] transition-colors">
                    <span class="material-symbols-outlined text-[18px] mr-2">save</span>
                    Save Draft
                </button>
                <button id="exitBtn" class="flex items-center justify-center px-4 h-9 rounded-lg border border-[#e5e7eb] dark:border-[#444] text-sm font-bold hover:bg-gray-50 dark:hover:bg-[#333] transition-colors">
                    <span class="material-symbols-outlined text-[18px]">close</span>
                </button>
            </div>
        </div>
    </div>
</header>

<!-- Main Content -->
<main class="min-h-screen bg-background-light dark:bg-background-dark pt-8 pb-16">
    <div class="max-w-4xl mx-auto px-4">
        
        <!-- Progress Indicator -->
        <div id="progressIndicator" class="mb-12">
            <div class="flex justify-between mb-6">
                <div class="step-indicator flex-1" data-step="1">
                    <div class="flex items-center gap-2">
                        <div class="step-circle w-10 h-10 rounded-full flex items-center justify-center font-bold border-2 border-gray-300 dark:border-[#444] text-gray-500 dark:text-gray-400">1</div>
                        <span class="text-sm font-medium hidden sm:inline">Election Basics</span>
                    </div>
                </div>
                <div class="step-indicator flex-1" data-step="2">
                    <div class="flex items-center gap-2">
                        <div class="step-circle w-10 h-10 rounded-full flex items-center justify-center font-bold border-2 border-gray-300 dark:border-[#444] text-gray-500 dark:text-gray-400">2</div>
                        <span class="text-sm font-medium hidden sm:inline">Candidates</span>
                    </div>
                </div>
                <div class="step-indicator flex-1" data-step="3">
                    <div class="flex items-center gap-2">
                        <div class="step-circle w-10 h-10 rounded-full flex items-center justify-center font-bold border-2 border-gray-300 dark:border-[#444] text-gray-500 dark:text-gray-400">3</div>
                        <span class="text-sm font-medium hidden sm:inline">Voters</span>
                    </div>
                </div>
                <div class="step-indicator flex-1" data-step="4">
                    <div class="flex items-center gap-2">
                        <div class="step-circle w-10 h-10 rounded-full flex items-center justify-center font-bold border-2 border-gray-300 dark:border-[#444] text-gray-500 dark:text-gray-400">4</div>
                        <span class="text-sm font-medium hidden sm:inline">Ballot</span>
                    </div>
                </div>
                <div class="step-indicator flex-1" data-step="5">
                    <div class="flex items-center gap-2">
                        <div class="step-circle w-10 h-10 rounded-full flex items-center justify-center font-bold border-2 border-gray-300 dark:border-[#444] text-gray-500 dark:text-gray-400">5</div>
                        <span class="text-sm font-medium hidden sm:inline">Timeline</span>
                    </div>
                </div>
                <div class="step-indicator flex-1" data-step="6">
                    <div class="flex items-center gap-2">
                        <div class="step-circle w-10 h-10 rounded-full flex items-center justify-center font-bold border-2 border-gray-300 dark:border-[#444] text-gray-500 dark:text-gray-400">6</div>
                        <span class="text-sm font-medium hidden sm:inline">Security</span>
                    </div>
                </div>
                <div class="step-indicator flex-1" data-step="7">
                    <div class="flex items-center gap-2">
                        <div class="step-circle w-10 h-10 rounded-full flex items-center justify-center font-bold border-2 border-gray-300 dark:border-[#444] text-gray-500 dark:text-gray-400">7</div>
                        <span class="text-sm font-medium hidden sm:inline">Review</span>
                    </div>
                </div>
            </div>
            <div class="h-1 bg-gray-200 dark:bg-[#333] rounded-full overflow-hidden">
                <div id="progressBar" class="h-full bg-primary transition-all duration-300" style="width: 14.28%"></div>
            </div>
        </div>

        <!-- Form Container -->
        <form id="electionForm" class="space-y-6">
            
            <!-- STEP 1: Election Basics -->
            <div id="step-1" class="form-step">
                <div class="bg-white dark:bg-[#1a1a1a] rounded-xl border border-gray-200 dark:border-[#333] p-8">
                    <h2 class="text-3xl font-bold mb-8">Create Election</h2>
                    
                    <!-- Election Name -->
                    <div class="mb-6">
                        <label class="block text-sm font-bold mb-2">Election Name *</label>
                        <input 
                            type="text" 
                            id="electionName" 
                            name="electionName" 
                            class="form-input w-full px-4 py-2 border border-gray-300 dark:border-[#444] rounded-lg dark:bg-[#252525] dark:text-white focus:outline-none focus:ring-2 focus:ring-primary"
                            placeholder="e.g., Student Council 2024"
                            required
                        />
                        <p id="electionNameError" class="text-red-500 text-xs mt-1 hidden">Election name is required</p>
                    </div>

                    <!-- Election Type -->
                    <div class="mb-6">
                        <label class="block text-sm font-bold mb-2">Election Type *</label>
                        <select 
                            id="electionType" 
                            name="electionType" 
                            class="w-full px-4 py-2 border border-gray-300 dark:border-[#444] rounded-lg dark:bg-[#252525] dark:text-white focus:outline-none focus:ring-2 focus:ring-primary"
                            required
                        >
                            <option value="">Select Type</option>
                            <option value="student">Student Election</option>
                            <option value="corporate">Corporate Board</option>
                            <option value="housing">Housing Society</option>
                            <option value="custom">Custom</option>
                        </select>
                        <p id="electionTypeError" class="text-red-500 text-xs mt-1 hidden">Election type is required</p>
                    </div>

                    <!-- Description -->
                    <div class="mb-6">
                        <label class="block text-sm font-bold mb-2">Description (Purpose) *</label>
                        <textarea 
                            id="description" 
                            name="description" 
                            class="form-input w-full px-4 py-2 border border-gray-300 dark:border-[#444] rounded-lg dark:bg-[#252525] dark:text-white focus:outline-none focus:ring-2 focus:ring-primary resize-none"
                            placeholder="What is this election for?"
                            rows="4"
                            required
                        ></textarea>
                        <p id="descriptionError" class="text-red-500 text-xs mt-1 hidden">Description is required</p>
                    </div>

                    <!-- Organization Name -->
                    <div class="mb-6">
                        <label class="block text-sm font-bold mb-2">Organization Name *</label>
                        <input 
                            type="text" 
                            id="organizationName" 
                            name="organizationName" 
                            class="form-input w-full px-4 py-2 border border-gray-300 dark:border-[#444] rounded-lg dark:bg-[#252525] dark:text-white focus:outline-none focus:ring-2 focus:ring-primary"
                            placeholder="Your organization or institution"
                            required
                        />
                        <p id="organizationNameError" class="text-red-500 text-xs mt-1 hidden">Organization name is required</p>
                    </div>

                    <!-- Time Zone -->
                    <div class="mb-6">
                        <label class="block text-sm font-bold mb-2">Time Zone *</label>
                        <select 
                            id="timeZone" 
                            name="timeZone" 
                            class="w-full px-4 py-2 border border-gray-300 dark:border-[#444] rounded-lg dark:bg-[#252525] dark:text-white focus:outline-none focus:ring-2 focus:ring-primary"
                            required
                        >
                            <option value="">Select Time Zone</option>
                            <option value="UTC">UTC / GMT</option>
                            <option value="EST">Eastern (EST)</option>
                            <option value="CST">Central (CST)</option>
                            <option value="MST">Mountain (MST)</option>
                            <option value="PST">Pacific (PST)</option>
                            <option value="IST">Indian Standard Time (IST)</option>
                            <option value="GMT+1">Central European (GMT+1)</option>
                            <option value="GMT+8">Singapore/Hong Kong (GMT+8)</option>
                            <option value="AEST">Australian Eastern (AEST)</option>
                        </select>
                        <p id="timeZoneError" class="text-red-500 text-xs mt-1 hidden">Time zone is required</p>
                    </div>

                    <!-- Auto-save indicator -->
                    <div class="text-xs text-gray-500 flex items-center gap-1 pt-4">
                        <span class="material-symbols-outlined text-[14px]">cloud_sync</span>
                        Draft auto-saved
                    </div>
                </div>
            </div>

            <!-- STEP 2: Candidates Setup -->
            <div id="step-2" class="form-step hidden">
                <div class="bg-white dark:bg-[#1a1a1a] rounded-xl border border-gray-200 dark:border-[#333] p-8">
                    <h2 class="text-3xl font-bold mb-8">Add Candidates</h2>
                    
                    <!-- Tabs -->
                    <div class="mb-6 flex gap-4 border-b border-gray-200 dark:border-[#333]">
                        <button type="button" class="tab-button active pb-3 text-sm font-bold text-primary border-b-2 border-primary" data-tab="manual">
                            <span class="material-symbols-outlined text-[18px] mr-1 align-middle">person_add</span>
                            Add Manually
                        </button>
                        <button type="button" class="tab-button pb-3 text-sm font-bold text-gray-500 dark:text-gray-400 border-b-2 border-transparent" data-tab="csv">
                            <span class="material-symbols-outlined text-[18px] mr-1 align-middle">upload_file</span>
                            Upload CSV
                        </button>
                    </div>

                    <!-- Manual Entry Tab -->
                    <div id="tab-manual" class="tab-content">
                        <div class="mb-6 space-y-4">
                            <!-- New Candidate Input -->
                            <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                                <input 
                                    type="text" 
                                    id="candidateName" 
                                    placeholder="Candidate Name" 
                                    class="form-input px-4 py-2 border border-gray-300 dark:border-[#444] rounded-lg dark:bg-[#252525] dark:text-white focus:outline-none focus:ring-2 focus:ring-primary"
                                />
                                <input 
                                    type="text" 
                                    id="candidateId" 
                                    placeholder="Candidate ID / Roll No" 
                                    class="form-input px-4 py-2 border border-gray-300 dark:border-[#444] rounded-lg dark:bg-[#252525] dark:text-white focus:outline-none focus:ring-2 focus:ring-primary"
                                />
                                <button type="button" id="addCandidateBtn" class="h-10 px-4 rounded-lg bg-primary text-white font-bold text-sm hover:bg-primary/90 transition-colors flex items-center justify-center gap-2">
                                    <span class="material-symbols-outlined text-[18px]">add_circle</span>
                                    Add
                                </button>
                            </div>

                            <!-- Candidates List -->
                            <div id="candidatesList" class="space-y-3 mt-6">
                                <!-- Candidates will be added here -->
                            </div>
                        </div>
                        <p id="candidatesError" class="text-red-500 text-sm mt-4 hidden">Add at least 2 candidates</p>
                    </div>

                    <!-- CSV Upload Tab -->
                    <div id="tab-csv" class="tab-content hidden">
                        <div class="csv-upload-zone" id="csvUploadZone">
                            <span class="material-symbols-outlined text-4xl text-gray-400 mb-2">cloud_upload</span>
                            <p class="font-bold mb-1">Drag and drop CSV file here</p>
                            <p class="text-xs text-gray-500 mb-4">or click to browse (Max 5MB)</p>
                            <input type="file" id="csvFile" accept=".csv" class="hidden" />
                            <button type="button" class="px-4 py-2 bg-primary text-white rounded-lg font-bold text-sm hover:bg-primary/90">Browse Files</button>
                        </div>
                        <p class="text-xs text-gray-500 mt-4">
                            <strong>CSV Format:</strong> Candidate Name, Candidate ID, Photo URL (optional)
                        </p>
                    </div>
                </div>
            </div>

            <!-- STEP 3: Voter List & Verification -->
            <div id="step-3" class="form-step hidden">
                <div class="bg-white dark:bg-[#1a1a1a] rounded-xl border border-gray-200 dark:border-[#333] p-8">
                    <h2 class="text-3xl font-bold mb-8">Authorize Voters</h2>

                    <!-- Input Methods -->
                    <div class="mb-8">
                        <label class="block text-sm font-bold mb-4">Input Method *</label>
                        <div class="space-y-3">
                            <label class="flex items-center">
                                <input type="radio" name="voterInputMethod" value="manual" class="w-4 h-4 mr-3" checked required />
                                <span>Manual Entry</span>
                            </label>
                            <label class="flex items-center">
                                <input type="radio" name="voterInputMethod" value="csv" class="w-4 h-4 mr-3" required />
                                <span>Upload CSV</span>
                            </label>
                            <label class="flex items-center">
                                <input type="radio" name="voterInputMethod" value="api" class="w-4 h-4 mr-3" required />
                                <span>API Sync (Future)</span>
                            </label>
                        </div>
                    </div>

                    <!-- Manual Voter Entry -->
                    <div id="manual-voters" class="mb-6">
                        <label class="block text-sm font-bold mb-2">Add Voters</label>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4">
                            <input 
                                type="email" 
                                id="voterEmail" 
                                placeholder="Voter Email" 
                                class="form-input px-4 py-2 border border-gray-300 dark:border-[#444] rounded-lg dark:bg-[#252525] dark:text-white focus:outline-none focus:ring-2 focus:ring-primary"
                            />
                            <button type="button" id="addVoterBtn" class="h-10 px-4 rounded-lg bg-primary text-white font-bold text-sm hover:bg-primary/90 transition-colors flex items-center justify-center gap-2">
                                <span class="material-symbols-outlined text-[18px]">person_add</span>
                                Add Voter
                            </button>
                        </div>
                        <div id="votersList" class="space-y-2">
                            <!-- Voters will be added here -->
                        </div>
                    </div>

                    <!-- Verification Methods -->
                    <div class="mb-6">
                        <label class="block text-sm font-bold mb-4">Verification Methods (Select at least one) *</label>
                        <div class="checkbox-group space-y-3">
                            <label>
                                <input type="checkbox" name="verificationMethod" value="email-otp" class="w-4 h-4 mr-3" required />
                                <span>Email OTP</span>
                            </label>
                            <label>
                                <input type="checkbox" name="verificationMethod" value="sms-otp" class="w-4 h-4 mr-3" />
                                <span>SMS OTP</span>
                            </label>
                            <label>
                                <input type="checkbox" name="verificationMethod" value="employee-id" class="w-4 h-4 mr-3" />
                                <span>Employee / Student ID</span>
                            </label>
                            <label>
                                <input type="checkbox" name="verificationMethod" value="token" class="w-4 h-4 mr-3" />
                                <span>Unique Token</span>
                            </label>
                        </div>
                        <p id="verificationError" class="text-red-500 text-xs mt-2 hidden">Select at least one verification method</p>
                    </div>

                    <!-- Security note -->
                    <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4">
                        <p class="text-sm text-blue-900 dark:text-blue-200 flex items-start gap-2">
                            <span class="material-symbols-outlined text-[18px] mt-0.5 flex-shrink-0">info</span>
                            <span>
                                <strong>Security:</strong> One voter = one vote. Voter list is encrypted. No voter can see results before election closes.
                            </span>
                        </p>
                    </div>
                </div>
            </div>

            <!-- STEP 4: Ballot Configuration -->
            <div id="step-4" class="form-step hidden">
                <div class="bg-white dark:bg-[#1a1a1a] rounded-xl border border-gray-200 dark:border-[#333] p-8">
                    <h2 class="text-3xl font-bold mb-8">Configure Ballot</h2>

                    <!-- Voting Type -->
                    <div class="mb-6">
                        <label class="block text-sm font-bold mb-4">Voting Type *</label>
                        <div class="space-y-3">
                            <label class="flex items-center p-3 border border-gray-200 dark:border-[#444] rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-[#252525]">
                                <input type="radio" name="votingType" value="single" class="w-4 h-4 mr-3" checked required />
                                <div>
                                    <span class="font-bold">Single Choice</span>
                                    <p class="text-xs text-gray-500">Voter selects one candidate</p>
                                </div>
                            </label>
                            <label class="flex items-center p-3 border border-gray-200 dark:border-[#444] rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-[#252525]">
                                <input type="radio" name="votingType" value="multiple" class="w-4 h-4 mr-3" required />
                                <div>
                                    <span class="font-bold">Multiple Choice</span>
                                    <p class="text-xs text-gray-500">Voter can select multiple candidates</p>
                                </div>
                            </label>
                            <label class="flex items-center p-3 border border-gray-200 dark:border-[#444] rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-[#252525]">
                                <input type="radio" name="votingType" value="ranked" class="w-4 h-4 mr-3" required />
                                <div>
                                    <span class="font-bold">Ranked Voting</span>
                                    <p class="text-xs text-gray-500">Voter ranks candidates by preference</p>
                                </div>
                            </label>
                        </div>
                    </div>

                    <!-- Allow Vote Change -->
                    <div class="mb-6 p-4 border border-gray-200 dark:border-[#444] rounded-lg flex items-center justify-between">
                        <div>
                            <label class="font-bold">Allow Voters to Change Vote?</label>
                            <p class="text-xs text-gray-500 mt-1">Voters can edit their vote before election ends</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="allowVoteChange" name="allowVoteChange" />
                            <span class="toggle-slider"></span>
                        </label>
                    </div>

                    <!-- Anonymous Voting -->
                    <div class="mb-6 p-4 border border-gray-200 dark:border-[#444] rounded-lg flex items-center justify-between">
                        <div>
                            <label class="font-bold">Anonymous Voting</label>
                            <p class="text-xs text-gray-500 mt-1">Voter identity is not linked to their vote</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="anonymousVoting" name="anonymousVoting" checked />
                            <span class="toggle-slider"></span>
                        </label>
                    </div>

                    <!-- Ballot Preview -->
                    <div class="mb-6">
                        <h3 class="text-sm font-bold mb-4">Sample Ballot Preview</h3>
                        <div class="bg-gray-50 dark:bg-[#252525] rounded-lg p-6 border border-gray-200 dark:border-[#444]">
                            <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">Sample candidates from your list:</p>
                            <div class="space-y-3">
                                <label class="flex items-center">
                                    <input type="radio" disabled class="w-4 h-4 mr-3" />
                                    <span class="text-sm">[Candidate Preview]</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" disabled class="w-4 h-4 mr-3" />
                                    <span class="text-sm">[Candidate Preview]</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- STEP 5: Election Timeline -->
            <div id="step-5" class="form-step hidden">
                <div class="bg-white dark:bg-[#1a1a1a] rounded-xl border border-gray-200 dark:border-[#333] p-8">
                    <h2 class="text-3xl font-bold mb-8">Schedule Election</h2>

                    <!-- Start Date & Time -->
                    <div class="mb-6 grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-bold mb-2">Start Date & Time *</label>
                            <input 
                                type="datetime-local" 
                                id="startDateTime" 
                                name="startDateTime" 
                                class="form-input w-full px-4 py-2 border border-gray-300 dark:border-[#444] rounded-lg dark:bg-[#252525] dark:text-white focus:outline-none focus:ring-2 focus:ring-primary"
                                required
                            />
                            <p id="startDateTimeError" class="text-red-500 text-xs mt-1 hidden">Start date & time is required</p>
                        </div>

                        <!-- End Date & Time -->
                        <div>
                            <label class="block text-sm font-bold mb-2">End Date & Time *</label>
                            <input 
                                type="datetime-local" 
                                id="endDateTime" 
                                name="endDateTime" 
                                class="form-input w-full px-4 py-2 border border-gray-300 dark:border-[#444] rounded-lg dark:bg-[#252525] dark:text-white focus:outline-none focus:ring-2 focus:ring-primary"
                                required
                            />
                            <p id="endDateTimeError" class="text-red-500 text-xs mt-1 hidden">End date & time is required</p>
                        </div>
                    </div>

                    <!-- Result Visibility -->
                    <div class="mb-6">
                        <label class="block text-sm font-bold mb-4">Result Visibility *</label>
                        <div class="space-y-3">
                            <label class="flex items-center p-3 border border-gray-200 dark:border-[#444] rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-[#252525]">
                                <input type="radio" name="resultVisibility" value="immediate" class="w-4 h-4 mr-3" checked required />
                                <div>
                                    <span class="font-bold">Immediate</span>
                                    <p class="text-xs text-gray-500">Results shown as soon as election ends</p>
                                </div>
                            </label>
                            <label class="flex items-center p-3 border border-gray-200 dark:border-[#444] rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-[#252525]">
                                <input type="radio" name="resultVisibility" value="manual" class="w-4 h-4 mr-3" required />
                                <div>
                                    <span class="font-bold">Manual Approval</span>
                                    <p class="text-xs text-gray-500">Admin must approve results before showing</p>
                                </div>
                            </label>
                        </div>
                    </div>

                    <!-- Timeline Validation -->
                    <p id="timelineError" class="text-red-500 text-sm mt-4 hidden">End time must be after start time</p>
                </div>
            </div>

            <!-- STEP 6: Security & Compliance -->
            <div id="step-6" class="form-step hidden">
                <div class="bg-white dark:bg-[#1a1a1a] rounded-xl border border-gray-200 dark:border-[#333] p-8">
                    <h2 class="text-3xl font-bold mb-8">Security & Audit Controls</h2>

                    <!-- Security Toggles -->
                    <div class="space-y-4">
                        <div class="p-4 border border-gray-200 dark:border-[#444] rounded-lg flex items-center justify-between">
                            <div>
                                <label class="font-bold flex items-center gap-2">
                                    <span class="material-symbols-outlined text-primary">shield_lock</span>
                                    End-to-End Encryption
                                </label>
                                <p class="text-xs text-gray-500 mt-1">AES-256 encryption standard</p>
                            </div>
                            <div class="text-primary font-bold text-xs">ENABLED</div>
                        </div>

                        <div class="p-4 border border-gray-200 dark:border-[#444] rounded-lg flex items-center justify-between">
                            <div>
                                <label class="font-bold flex items-center gap-2">
                                    <span class="material-symbols-outlined text-primary">assessment</span>
                                    Immutable Audit Logs
                                </label>
                                <p class="text-xs text-gray-500 mt-1">Tamper-proof event records</p>
                            </div>
                            <div class="text-primary font-bold text-xs">ENABLED</div>
                        </div>

                        <div class="p-4 border border-gray-200 dark:border-[#444] rounded-lg flex items-center justify-between">
                            <div>
                                <label class="font-bold flex items-center gap-2">
                                    <span class="material-symbols-outlined text-primary">warning</span>
                                    Fraud Detection
                                </label>
                                <p class="text-xs text-gray-500 mt-1">IP & device anomaly detection</p>
                            </div>
                            <div class="text-primary font-bold text-xs">ENABLED</div>
                        </div>
                    </div>

                    <!-- Security Guarantees -->
                    <div class="mt-8 bg-gradient-to-r from-blue-50 to-primary/5 dark:from-blue-900/20 dark:to-primary/10 border border-blue-200 dark:border-blue-800/30 rounded-lg p-6">
                        <h3 class="font-bold mb-4 text-navy-deep dark:text-white">Security Guarantees</h3>
                        <ul class="space-y-3 text-sm text-gray-700 dark:text-gray-300">
                            <li class="flex items-start gap-3">
                                <span class="material-symbols-outlined text-green-600 flex-shrink-0">verified</span>
                                <span><strong>Zero-Knowledge Architecture:</strong> System doesn't know who voted for whom</span>
                            </li>
                            <li class="flex items-start gap-3">
                                <span class="material-symbols-outlined text-green-600 flex-shrink-0">verified</span>
                                <span><strong>Admin Isolation:</strong> Even admins cannot view individual votes</span>
                            </li>
                            <li class="flex items-start gap-3">
                                <span class="material-symbols-outlined text-green-600 flex-shrink-0">verified</span>
                                <span><strong>Encrypted Storage:</strong> All votes stored encrypted at rest</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- STEP 7: Review & Confirm -->
            <div id="step-7" class="form-step hidden">
                <div class="bg-white dark:bg-[#1a1a1a] rounded-xl border border-gray-200 dark:border-[#333] p-8">
                    <h2 class="text-3xl font-bold mb-8">Review Election Details</h2>

                    <!-- Summary Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                        <!-- Election Info -->
                        <div class="p-6 bg-gray-50 dark:bg-[#252525] rounded-lg border border-gray-200 dark:border-[#444]">
                            <h3 class="font-bold mb-4 flex items-center gap-2">
                                <span class="material-symbols-outlined">event</span>
                                Election Information
                            </h3>
                            <div class="space-y-3 text-sm">
                                <div>
                                    <p class="text-gray-500 dark:text-gray-400">Election Name</p>
                                    <p id="reviewElectionName" class="font-bold">-</p>
                                </div>
                                <div>
                                    <p class="text-gray-500 dark:text-gray-400">Type</p>
                                    <p id="reviewElectionType" class="font-bold">-</p>
                                </div>
                                <div>
                                    <p class="text-gray-500 dark:text-gray-400">Organization</p>
                                    <p id="reviewOrganization" class="font-bold">-</p>
                                </div>
                            </div>
                        </div>

                        <!-- Candidates Info -->
                        <div class="p-6 bg-gray-50 dark:bg-[#252525] rounded-lg border border-gray-200 dark:border-[#444]">
                            <h3 class="font-bold mb-4 flex items-center gap-2">
                                <span class="material-symbols-outlined">groups</span>
                                Candidates
                            </h3>
                            <div class="space-y-3 text-sm">
                                <div>
                                    <p class="text-gray-500 dark:text-gray-400">Total Candidates</p>
                                    <p id="reviewCandidateCount" class="font-bold">-</p>
                                </div>
                                <div id="reviewCandidateList" class="text-gray-600 dark:text-gray-400 text-xs space-y-1 mt-3 pt-3 border-t border-gray-300 dark:border-[#333]">
                                    <!-- Candidates list will be populated -->
                                </div>
                            </div>
                        </div>

                        <!-- Timeline Info -->
                        <div class="p-6 bg-gray-50 dark:bg-[#252525] rounded-lg border border-gray-200 dark:border-[#444]">
                            <h3 class="font-bold mb-4 flex items-center gap-2">
                                <span class="material-symbols-outlined">schedule</span>
                                Timeline
                            </h3>
                            <div class="space-y-3 text-sm">
                                <div>
                                    <p class="text-gray-500 dark:text-gray-400">Starts</p>
                                    <p id="reviewStartTime" class="font-bold font-mono text-xs">-</p>
                                </div>
                                <div>
                                    <p class="text-gray-500 dark:text-gray-400">Ends</p>
                                    <p id="reviewEndTime" class="font-bold font-mono text-xs">-</p>
                                </div>
                            </div>
                        </div>

                        <!-- Voters Info -->
                        <div class="p-6 bg-gray-50 dark:bg-[#252525] rounded-lg border border-gray-200 dark:border-[#444]">
                            <h3 class="font-bold mb-4 flex items-center gap-2">
                                <span class="material-symbols-outlined">verified_user</span>
                                Voters
                            </h3>
                            <div class="space-y-3 text-sm">
                                <div>
                                    <p class="text-gray-500 dark:text-gray-400">Total Registered</p>
                                    <p id="reviewVoterCount" class="font-bold">-</p>
                                </div>
                                <div>
                                    <p class="text-gray-500 dark:text-gray-400">Verification</p>
                                    <p id="reviewVerification" class="font-bold font-mono text-xs">-</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Confirmation Checkbox -->
                    <div class="p-6 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg mb-6">
                        <label class="flex items-start gap-3 cursor-pointer">
                            <input type="checkbox" id="confirmCheckbox" required class="w-4 h-4 mt-1 accent-primary" />
                            <span class="text-sm dark:text-gray-200">
                                <strong>I understand that once published, this election cannot be altered.</strong> All settings are locked and cannot be changed. Ensure all details are correct before proceeding.
                            </span>
                        </label>
                        <p id="confirmError" class="text-red-500 text-xs mt-2 hidden">You must confirm before creating the election</p>
                    </div>
                </div>
            </div>

            <!-- STEP 8: Success Screen (Hidden until created) -->
            <div id="step-8" class="form-step hidden">
                <div class="bg-white dark:bg-[#1a1a1a] rounded-xl border border-gray-200 dark:border-[#333] p-8 text-center">
                    <div class="mb-8">
                        <div class="success-icon text-6xl mb-4 flex justify-center">
                            <span class="material-symbols-outlined text-primary" style="font-size: 80px;">task_alt</span>
                        </div>
                    </div>
                    
                    <h2 class="text-3xl font-bold mb-4">Election Created Successfully!</h2>
                    <p class="text-gray-600 dark:text-gray-400 mb-8 max-w-md mx-auto">Your election has been created and is ready to launch. Share the voter link and start collecting votes securely.</p>

                    <!-- Election Details -->
                    <div class="bg-gray-50 dark:bg-[#252525] rounded-lg p-6 border border-gray-200 dark:border-[#444] mb-8 text-left max-w-md mx-auto">
                        <div class="mb-4">
                            <p class="text-xs text-gray-500 dark:text-gray-400 uppercase font-bold">Election ID</p>
                            <p id="successElectionId" class="font-mono font-bold text-primary">ELECTION-2024-001</p>
                        </div>
                        <div class="mb-4 pb-4 border-b border-gray-200 dark:border-[#333]">
                            <p class="text-xs text-gray-500 dark:text-gray-400 uppercase font-bold">Status</p>
                            <p class="font-bold flex items-center gap-2"><span class="material-symbols-outlined text-green-600 text-[18px]">schedule</span>Scheduled</p>
                        </div>
                        <div>
                            <p class="text-xs text-gray-500 dark:text-gray-400 uppercase font-bold mb-2">Voter Link</p>
                            <div class="flex gap-2">
                                <input type="text" id="voterLinkInput" value="https://vote.votesecure.io/election-code" class="flex-1 px-3 py-2 rounded bg-white dark:bg-[#1a1a1a] border border-gray-300 dark:border-[#444] text-xs font-mono" readonly />
                                <button type="button" id="copyLinkBtn" class="px-3 py-2 bg-primary text-white rounded text-xs font-bold hover:bg-primary/90">
                                    <span class="material-symbols-outlined text-[16px]">content_copy</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex flex-col sm:flex-row gap-4 justify-center">
                        <button type="button" id="dashboardBtn" class="h-12 px-8 rounded-lg bg-primary text-white font-bold text-base shadow-lg hover:shadow-xl hover:bg-primary/90 transition-all flex items-center justify-center gap-2">
                            <span class="material-symbols-outlined">dashboard</span>
                            Go to Dashboard
                        </button>
                        <button type="button" id="monitoringBtn" class="h-12 px-8 rounded-lg bg-transparent border-2 border-primary text-primary dark:text-white font-bold text-base hover:bg-primary/10 transition-colors flex items-center justify-center gap-2">
                            <span class="material-symbols-outlined">monitoring</span>
                            View Live Monitoring
                        </button>
                    </div>
                </div>
            </div>

            <!-- Navigation Buttons -->
            <div class="flex gap-4 justify-between mt-8">
                <button type="button" id="prevBtn" class="h-12 px-8 rounded-lg border-2 border-gray-300 dark:border-[#444] text-navy-deep dark:text-white font-bold text-base hover:bg-gray-50 dark:hover:bg-[#252525] transition-colors flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed">
                    <span class="material-symbols-outlined">arrow_back</span>
                    Back
                </button>
                
                <button type="button" id="nextBtn" class="h-12 px-8 rounded-lg bg-primary text-white font-bold text-base shadow-lg hover:shadow-xl hover:bg-primary/90 transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed">
                    Continue
                    <span class="material-symbols-outlined">arrow_forward</span>
                </button>
            </div>
        </form>
    </div>
</main>

<!-- Draft autosave indicator -->
<div id="draftIndicator" class="draft-indicator">
    <span class="material-symbols-outlined text-[14px] mr-1">cloud_done</span>
    Draft saved
</div>

<!-- Scripts -->
<script src="app.js"></script>

</body>
</html>
